import {
  Student,
  AttendanceRecord,
  TestRecord,
} from "@/lib/instructor/types/class-detail";

export const mockStudents: Student[] = [
  {
    id: "1",
    rollNo: "101",
    name: "Abdullah Khan",
    fatherName: "Muhammad Khan",
    section: "A",
    admissionNo: "ADM-2023-001",
    registrationCode: "REG-101",
    registrationDate: "2023-03-15",
    dateOfBirth: "2008-05-20",
    phoneNo: "0300-1234567",
    fatherNicNo: "35202-1234567-1",
    monthlyFee: 5000,
    gender: "Male",
    region: "Lahore",
    fatherWhatsapp: "0300-1234567",
    studentWhatsapp: "0300-7654321",
    presentAddress: "House 123, Street 4, Johar Town, Lahore",
    reference: "N/A",
    studentEmail: "abdullah@example.com",
    fatherEmail: "muhammad@example.com",
    avatar: "/avatars/boy-1.png",
  },
  {
    id: "2",
    rollNo: "102",
    name: "Fatima Ali",
    fatherName: "Ali Hassan",
    section: "A",
    admissionNo: "ADM-2023-002",
    registrationCode: "REG-102",
    registrationDate: "2023-03-16",
    dateOfBirth: "2008-08-10",
    phoneNo: "0321-7654321",
    fatherNicNo: "35202-7654321-2",
    monthlyFee: 5000,
    gender: "Female",
    region: "Lahore",
    fatherWhatsapp: "0321-7654321",
    studentWhatsapp: "",
    presentAddress: "Flat 5, Model Town, Lahore",
    reference: "Uncle",
    studentEmail: "fatima@example.com",
    fatherEmail: "ali@example.com",
    avatar: "/avatars/girl-1.png",
  },
  {
    id: "3",
    rollNo: "103",
    name: "Ahmed Raza",
    fatherName: "Raza Ahmed",
    section: "A",
    admissionNo: "ADM-2023-003",
    registrationCode: "REG-103",
    registrationDate: "2023-03-17",
    dateOfBirth: "2008-02-14",
    phoneNo: "0333-1122334",
    fatherNicNo: "35202-1122334-3",
    monthlyFee: 5000,
    gender: "Male",
    region: "Lahore",
    fatherWhatsapp: "0333-1122334",
    studentWhatsapp: "0300-9988776",
    presentAddress: "House 10, DHA Phase 5, Lahore",
    reference: "N/A",
    studentEmail: "ahmed@example.com",
    fatherEmail: "raza@example.com",
    avatar: "/avatars/boy-2.png",
  },
  {
    id: "4",
    rollNo: "104",
    name: "Zainab Bibi",
    fatherName: "Muhammad Hussain",
    section: "A",
    admissionNo: "ADM-2023-004",
    registrationCode: "REG-104",
    registrationDate: "2023-03-18",
    dateOfBirth: "2009-01-05",
    phoneNo: "0345-5566778",
    fatherNicNo: "35202-5566778-4",
    monthlyFee: 5000,
    gender: "Female",
    region: "Lahore",
    fatherWhatsapp: "0345-5566778",
    studentWhatsapp: "",
    presentAddress: "House 22, Gulberg III, Lahore",
    reference: "Aunt",
    studentEmail: "zainab@example.com",
    fatherEmail: "hussain@example.com",
    avatar: "/avatars/girl-2.png",
  },
  {
    id: "5",
    rollNo: "105",
    name: "Bilal Khan",
    fatherName: "Saeed Khan",
    section: "A",
    admissionNo: "ADM-2023-005",
    registrationCode: "REG-105",
    registrationDate: "2023-03-19",
    dateOfBirth: "2008-11-30",
    phoneNo: "0301-2233445",
    fatherNicNo: "35202-2233445-5",
    monthlyFee: 5000,
    gender: "Male",
    region: "Lahore",
    fatherWhatsapp: "0301-2233445",
    studentWhatsapp: "0302-3344556",
    presentAddress: "House 88, Wapda Town, Lahore",
    reference: "N/A",
    studentEmail: "bilal@example.com",
    fatherEmail: "saeed@example.com",
    avatar: "/avatars/boy-3.png",
  },
  {
    id: "6",
    rollNo: "106",
    name: "Ayesha Malik",
    fatherName: "Malik Ahmed",
    section: "A",
    admissionNo: "ADM-2023-006",
    registrationCode: "REG-106",
    registrationDate: "2023-03-20",
    dateOfBirth: "2009-03-12",
    phoneNo: "0322-8877665",
    fatherNicNo: "35202-8877665-6",
    monthlyFee: 5000,
    gender: "Female",
    region: "Lahore",
    fatherWhatsapp: "0322-8877665",
    studentWhatsapp: "",
    presentAddress: "House 5, Township, Lahore",
    reference: "N/A",
    studentEmail: "ayesha@example.com",
    fatherEmail: "malik@example.com",
    avatar: "/avatars/girl-3.png",
  },
  {
    id: "7",
    rollNo: "107",
    name: "Usman Ghani",
    fatherName: "Ghani Rehman",
    section: "A",
    admissionNo: "ADM-2023-007",
    registrationCode: "REG-107",
    registrationDate: "2023-03-21",
    dateOfBirth: "2008-07-25",
    phoneNo: "0313-9988776",
    fatherNicNo: "35202-9988776-7",
    monthlyFee: 5000,
    gender: "Male",
    region: "Lahore",
    fatherWhatsapp: "0313-9988776",
    studentWhatsapp: "0314-1122334",
    presentAddress: "House 15, Bahria Town, Lahore",
    reference: "N/A",
    studentEmail: "usman@example.com",
    fatherEmail: "ghani@example.com",
    avatar: "/avatars/boy-4.png",
  },
  {
    id: "8",
    rollNo: "108",
    name: "Sana Tariq",
    fatherName: "Tariq Mahmood",
    section: "A",
    admissionNo: "ADM-2023-008",
    registrationCode: "REG-108",
    registrationDate: "2023-03-22",
    dateOfBirth: "2009-02-08",
    phoneNo: "0334-4455667",
    fatherNicNo: "35202-4455667-8",
    monthlyFee: 5000,
    gender: "Female",
    region: "Lahore",
    fatherWhatsapp: "0334-4455667",
    studentWhatsapp: "",
    presentAddress: "House 9, Cantonment, Lahore",
    reference: "Brother",
    studentEmail: "sana@example.com",
    fatherEmail: "tariq@example.com",
    avatar: "/avatars/girl-4.png",
  },
  {
    id: "9",
    rollNo: "109",
    name: "Ali Raza",
    fatherName: "Raza Hussain",
    section: "A",
    admissionNo: "ADM-2023-009",
    registrationCode: "REG-109",
    registrationDate: "2023-03-23",
    dateOfBirth: "2008-09-15",
    phoneNo: "0305-5544332",
    fatherNicNo: "35202-5544332-9",
    monthlyFee: 5000,
    gender: "Male",
    region: "Lahore",
    fatherWhatsapp: "0305-5544332",
    studentWhatsapp: "0306-6677889",
    presentAddress: "House 3, Valencia Town, Lahore",
    reference: "N/A",
    studentEmail: "ali.r@example.com",
    fatherEmail: "raza.h@example.com",
    avatar: "/avatars/boy-5.png",
  },
  {
    id: "10",
    rollNo: "110",
    name: "Maria Khan",
    fatherName: "Khan Muhammad",
    section: "A",
    admissionNo: "ADM-2023-010",
    registrationCode: "REG-110",
    registrationDate: "2023-03-24",
    dateOfBirth: "2009-04-18",
    phoneNo: "0323-2211009",
    fatherNicNo: "35202-2211009-0",
    monthlyFee: 5000,
    gender: "Female",
    region: "Lahore",
    fatherWhatsapp: "0323-2211009",
    studentWhatsapp: "",
    presentAddress: "House 7, Garden Town, Lahore",
    reference: "N/A",
    studentEmail: "maria@example.com",
    fatherEmail: "khan@example.com",
    avatar: "/avatars/girl-5.png",
  },
  // ... can add more if needed, keeping it concise for now
];

export const mockAttendanceHistory: AttendanceRecord[] = [
  {
    id: "1",
    date: "2024-02-20",
    present: 28,
    absent: 2,
    leave: 0,
    status: "marked",
    topic: "Introduction to Calculus",
  },
  {
    id: "2",
    date: "2024-02-19",
    present: 29,
    absent: 1,
    leave: 0,
    status: "marked",
    topic: "Limits and Continuity",
  },
  {
    id: "3",
    date: "2024-02-18",
    present: 30,
    absent: 0,
    leave: 0,
    status: "marked",
    topic: "Derivatives Basics",
  },
  {
    id: "4",
    date: "2024-02-17",
    present: 25,
    absent: 3,
    leave: 2,
    status: "marked",
    topic: "Applications of Derivatives",
  },
  {
    id: "5",
    date: "2024-02-16",
    present: 27,
    absent: 3,
    leave: 0,
    status: "marked",
    topic: "Chain Rule",
  },
];

export const mockTests: TestRecord[] = [
  {
    id: "1",
    title: "Chapter 1 Quiz",
    date: "2024-02-15",
    totalMarks: 25,
    averageScore: 21.5,
    status: "graded",
  },
  {
    id: "2",
    title: "Mid-Term Examination",
    date: "2024-01-10",
    totalMarks: 100,
    averageScore: 78.2,
    status: "graded",
  },
  {
    id: "3",
    title: "Chapter 2 Test",
    date: "2024-02-25",
    totalMarks: 50,
    averageScore: 0,
    status: "upcoming",
  },
];

export const getClassDetail = (id: string) => {
  return {
    id,
    name: "Mathematics",
    grade: "10th",
    section: "A",
    totalStudents: 30,
    students: mockStudents,
    attendance: mockAttendanceHistory,
    tests: mockTests,
    homeworks: mockHomeworks,
  };
};

export const mockHomeworks: import("@/lib/instructor/types/class-detail").Homework[] =
  [
    {
      id: "1",
      description: "Complete Exercise 4.2 (Questions 1-10)",
      deadline: new Date("2024-03-25T23:59:00"),
      status: "active",
      assignedDate: new Date("2024-03-20"),
    },
    {
      id: "2",
      description: "Read Chapter 5: Integration Techniques",
      deadline: new Date("2024-03-22T23:59:00"),
      status: "completed",
      assignedDate: new Date("2024-03-18"),
    },
    {
      id: "3",
      description: "Solve past paper questions (2020-2022) for Algebra",
      deadline: new Date("2024-03-28T12:00:00"),
      status: "active",
      assignedDate: new Date("2024-03-21"),
    },
    {
      id: "4",
      description: "Differentiation Rules - Worksheet 3",
      deadline: new Date("2024-03-30T23:59:00"),
      status: "active",
      assignedDate: new Date("2024-03-22"),
    },
    {
      id: "5",
      description: "Vectors and Scalars: Watch Video Lecture & Summary",
      deadline: new Date("2024-03-15T23:59:00"),
      status: "completed",
      assignedDate: new Date("2024-03-10"),
    },
    {
      id: "6",
      description: "Matrices: Determinants and Inverses Practice",
      deadline: new Date("2024-04-02T12:00:00"),
      status: "active",
      assignedDate: new Date("2024-03-24"),
    },
    {
      id: "7",
      description: "Geometry: Circle Theorems Proofs",
      deadline: new Date("2024-03-26T23:59:00"),
      status: "active",
      assignedDate: new Date("2024-03-21"),
    },
  ];

export const getAttendanceDetails = (classId: string, recordId: string) => {
  const record = mockAttendanceHistory.find((r) => r.id === recordId);
  const classDetail = getClassDetail(classId);

  if (!record || !classDetail) return null;

  // Simulate student statuses based on the summary counts
  // unique seed based pseudo-random assignment for consistency
  let absentCount = 0;
  const attendanceMap: Record<string, "present" | "absent" | "leave"> = {};

  classDetail.students.forEach((student, index) => {
    // deterministic "random" based on recordId and index
    const isAbsent =
      absentCount < record.absent && (Number(recordId) + index) % 10 === 0;

    if (isAbsent) {
      attendanceMap[student.id] = "absent";
      absentCount++;
    } else {
      attendanceMap[student.id] = "present";
    }
  });

  return {
    ...record,
    studentStatuses: attendanceMap,
  };
};
